<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Qail Collective Login</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
    @font-face {
      font-family: 'Englibesh';
      src: url("{{ url_for('static', filename='fonts/Englibesh.ttf') }}") format("truetype");
    }
  </style>
</head>
<body class="starwars-bg">

    <div class="lang-switcher">
        <a href="{{ url_for('set_lang', lang='en') }}">EN</a> |
        <a href="{{ url_for('set_lang', lang='de') }}">DE</a>
    </div>

    <div class="login-container">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Qail Collective" class="logo">

        <h1 class="title">{{ t["title"] }}</h1>
        <h2 class="subtitle">{{ t["login_title"] }}</h2>

        {% if error %}
        <p class="error">{{ error }}</p>
        {% endif %}

        <form method="POST" id="login-form">
            <label for="username">{{ t["username"] }}</label>
            <input type="text" id="username" name="username" required>

            <label for="password">{{ t["password"] }}</label>
            <input type="password" id="password" name="password" required>

            <button type="submit" id="login">{{ t["login_button"] }}</button>
        </form>
    </div>

    <!-- Sounds -->
    <audio id="login-sound" src="{{ url_for('static', filename='sounds/login.wav') }}"></audio>
    <audio id="logout-sound" src="{{ url_for('static', filename='sounds/logout.wav') }}"></audio>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const loginForm = document.getElementById("login-form");
        const loginSound = document.getElementById("login-sound");
        const logoutSound = document.getElementById("logout-sound");

        // Play login sound on form submit
        loginForm.addEventListener("submit", () => {
          setTimeout(() => loginSound.play(), 300);
          loginSound.play();
        });

        // Play logout sound if the logout flag is set
        {% if session.get('just_logged_out') %}
          // Delay a bit so it doesn't block render
         // setTimeout(() => logoutSound.play(), 300);
        {% endif %}
      });
    </script>

</body>
</html>
